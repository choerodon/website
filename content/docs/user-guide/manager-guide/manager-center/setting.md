+++
title = "通用"
weight = 6
description = "用于对组织通用信息的设置"
+++

# 通用设置

## 1. 概述

在组织的通用设置，您可以了解组织的基本信息、LDAP、工作日历、仓库信息。您可以在这里进行通用设置。
要查看和设置组织的通用信息，您需要进行以下步骤：

1. 点击管理中心，点击菜单“设置>通用”，进入通用设置页面。
2. 在这里您可以看到组织的基本信息；
3. 切换到LDAP设置标签页，您可以查看组织层的ldap信息；
4. 切换到工作日历标签页，您可以查看组织层的工作日历信息；
5. 切换到仓库标签页，您可以查看组织层的仓库信息。

## 2. 组织基本信息

您可以看到组织的以下信息：

  - 组织logo：组织的图标，更好的标识您的组织。
  - 组织名称:组织的名称，标识您的组织。
  - 组织编码：组织的编码，具有唯一性。
  - 组织所在地：可以修改此组织所在的位置。
  - 官网地址：可以修改组织的官网地址。
  - 所有者：创建此组织的用户。

<div id = "ldap"></div>

## 3. ldap设置

LDAP是轻量目录访问协议。LDAP管理是对组织应用的LDAP信息设置的管理。LDAP只针对LDAP用户，LDAP用户的登录名和密码取自LDAP指向的外部系统中的数据。

组织下的LDAP属于该组织。LDAP设置包括服务器设置和用户属性设置两种LDAP信息设置，且有LDAP连接测试和LDAP用户同步这两种功能。用户可以使用测试连接功能来检测LDAP服务器是否可以连通以及是否可以正常获取用户属性值。用户可以使用同步用户功能来将LDAP服务器中的用户信息同步到平台中。

### 3.1 修改LDAP

#### 3.1.1 服务器设置

1. 目录类型：平台目前提供了两种常用的目录类型可供选择。

    - Microsoft Active Director：微软Windows Server中，负责架构中大型网络环境的集中式目录管理服务。

    - OpenLDAP：由OpenLDAP项目开发的轻量级目录访问协议（LDAP）的免费开源实现。

1. 主机名：运行 LDAP 的服务器主机名。例如：ldap://example.com。
1. 是否使用SSL：此选项会影响端口号。
1. 同步用户saga每次发送的用户数量：同步用户时，每次触发执行事务实例的数量。
1. ldap服务器连接超时时间：连接LDAP服务器时超过此时间未响应，则断开连接。
1. 端口号：使用SSL时，端口号是636，不使用SSL时，端口号是389。
1. 基准DN：从LDAP根节点搜索用户。例如，cn=users，dc=example，dc=com。
1. 管理员登录名：拥有LDAP管理员权限的用户登录到 LDAP的登录名。例如，user@domain.name 或 cn =用户， dc =域、dc =名称。
1. 管理员密码：拥有LDAP管理员权限的用户登录到LDAP的密码。

#### 3.1.2 用户属性设置


1. 用户对象类:加载用户时使用的LDAP用户对象类。
1. 登录名属性：与平台中用户的登录名相匹配的LDAP字段。例如，cn、sAMAccountName、LoginName。
1. 邮箱属性：与用户的邮箱属性相匹配的LDAP字段。例如，email。
1. 用户名属性：与用户的用户名相匹配的LDAP字段。例如，username。
1. 手机号属性：与用户的手机号相匹配的LDAP字段。例如，phonenumber。
1. uuid属性：ldap对象的唯一标识，大多数是'entryUUID'属性，Microsoft Active Directory可能是'objectGUID'属性，如果您的的ldap服务器确实不支持uuid，使用能唯一标识对象的字段即可，比如'uid'或者'entryDN'
1. 自定义筛选用户条件：额外的过滤条件用于同步用户，允许为空，表达式必须以'('开始，以')'结束，语法参考ldap search syntax。

### 3.2 测试连接

测试连接时，用户首先需要进行LDAP认证登录。

- LDAP登录名：登录LDAP系统进行LDAP用户认证时需要填写的登录名。
- LDAP登录密码：登录LDAP系统进行LDAP用户认证时需要填写的密码。

用户认证通过后可以进行LDAP基础连接和用户属性的校验。

### 3.3 同步用户

如果LDAP基础连接和用户属性校验通过。即可同步LDAP服务器中的用户信息至平台。

### 3.4 同步记录

点击`同步记录`，您可以查看此组织下的同步ldap用户的历史记录。


#### 3.4.1 同步记录列表

列表字段：

- 同步时间： 同步开始的时间。
- 成功人数：此次同步成功的人数与同步总人数之比。
- 失败人数：此次同步失败的人数。
- 耗时：此次同步花费的时间。

#### 3.4.2 ldap同步失败详情

点击同步记录列表的第一列（即时间列），即可查看同步用户失败的原因。

### 3.5 启用/停用LDAP

用户停用LDAP后，之前所同步的用户将无法登录平台，且之后无法继续同步用户和测试连接。启用后恢复正常登录和功能可用。

## 4. 工作日历

工作日历是对组织工作日期的管理，同组织下的项目默认工作日期为组织层工作日历的日期。工作日历中包含时区选择、地区选择、更新选择、周末设置和手动点选，用户可以根据组织工作时间、地点来设置工作日历。

### 4.1 修改工作日历

1. 点击`地区`下拉列表选择组织所在地区；
      <blockquote class="note">
        地区默认为亚洲
      </blockquote>
2. 点击`时区`下拉列表选择时区；
      <blockquote class="note">
        时区默认为（GMT+08:00）Shanghai
      </blockquote>
3. 多条件选择，条件包括`自动更新每年的法定节假日`(默认选中)、`选定周六为工作日`、`选定周日为工作日`
      <blockquote class="note">
        选中`选定周六为工作日`（`选定周日为工作日`）时，日历中的所有周六（周日）变为工作日
      </blockquote>
4. 以上的设置会反应在日历表中，如有其他特殊时间需求，可对日历具体日期点选，日历中蓝色边框日期为当日，字体颜色黑色为工作日，红色为休息日，带![](/docs/user-guide/manager-guide/image/ban.png)图标为法定节假日补班，带![](/docs/user-guide/manager-guide/image/xiu.png)图标为法定节假日;

## 5. 仓库

点击`仓库`进入详情页，再点击导航栏上方的`仓库配置`按钮，会从右侧弹出仓库的配置页面。

1. 修改默认Docker仓库为自定义Docker仓库。

    * 将默认Docker仓库切换为自定义Docker仓库。
    * 输入仓库地址。
    * 输入登录名与密码；此处需要输入有推拉代码权限的登录名和密码。
    * 输入登录名对应的邮箱。
    * 点击测试连接，若连接成功，则代表自定义仓库有效；若连接失败，则无法使用。
    
    > 在组织层配置自定义Docker仓库成功后，该组织下所有使用默认Docker仓库的项目中，之后生成的镜像均会存放在新的Docker仓库里。

2. 修改默认Helm仓库为自定义Helm仓库。

    * 将默认Helm仓库切换为自定义Helm仓库。
    * 输入仓库地址。
    * 点击测试连接，若连接成功，则代表自定义仓库有效；若连接失败，则无法使用。

    > 在组织层配置自定义Helm仓库成功后，该组织下所有使用默认Helm仓库的项目中，之后生成的Charts包均会存放在新的Helm仓库里。

## 6. 更多操作

- [安全设置](../safe)
- [管理组织下的用户](../org-user)
