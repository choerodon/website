+++
title = "菜单管理"
weight = 3
description = "用于配置平台菜单"
+++

# 菜单管理

## 1. 概述

菜单管理用于配置系统目录以及平台中的所有菜单。进入平台管理、某一个组织、某一个项目、个人中心都需要菜单进行功能导航。因此，菜单配置按层级划分为全局层、组织层、项目层、用户层，且某一层级下只能配置相同层级的菜单。您可以在此页面了解如何调整菜单顺序、创建目录、修改目录以及详情查看。

## 2. 菜单管理列表

路径：平台管理 -> Hzero框架管理 -> 菜单管理。     

按菜单层级的方式查看菜单列表。自0.22.0与Hzero融合后，菜单层级分为 **平台层**、**租户层**，选择不同层级会对应显示出不同的菜单；
 
- 选择层级为**平台层**时，列表中显示为平台管理中的所有菜单（包括Hzero框架的其他平台层菜单）；

   ![列表](/docs/user-guide/manager-guide/image/menu-setting.png)

- 选择层级为**租户层**时，列表中会显示出Choerodon组织层-管理中心、项目层以及个人信息的所有菜单；    

   ![列表1](/docs/user-guide/manager-guide/image/menu-setting-01.png)


列表字段：  

- 目录/菜单：目录或菜单等类型的名称           
- 上级目录：上级目录名称     
- 快速索引：菜单快速索引，默认为菜单等类型名称拼音首字母大写，可在左侧菜单栏搜索框内通过快速索引搜索菜单    
- 图标：目录或菜单的图标    
- 编码：目录或菜单等类型编码    
- 层级：菜单分为平台层，租户层  
- 类型：目录类型（根目录、自设目录），菜单类型（菜单、内部链接、外部链接、窗口），权限集，权限集属于菜单的子集  
- 序号：用于排序    
- 描述：描述信息    
- 状态：启用或禁用状态      


## 3. 调整菜单顺序

您通过拖拽的方式，直接调整菜单的顺序和位置。

将鼠标移至列表字段目录/菜单，会显示一个虚线框，该虚线框内则为鼠标长按拖动时可拖动的内容。如果一个目录下没有菜单，则不显示该目录。

如果鼠标悬停在目录上，虚线框内则为此目录和该目录下的所有目录/菜单，鼠标长按时可拖动此目录和该目录下的所有目录/菜单；若该目录下无目录/菜单，则虚线框内只有这个目录，鼠标长按时只可拖动这个目录。

如果鼠标悬停在菜单上，虚线框内只有这个菜单，鼠标长按只可拖动这个菜单。

## 4. 创建根目录

1. 通过列表页面右上角的`新建`按钮可创建`根目录`，即第一层的目录。   

    ![创建根目录](/docs/user-guide/manager-guide/image/menu-setting-02.png)  

2. 在创建页面中填写目录的相关信息。

    必填字段：
    - 类别：固定为根目录    
    - 层级：可选择 平台层、租户层   
    - 目录编码：目录编码分两段，第一段是产品(项目)的前缀，前缀通过 HIAM.MENU_PREFIX 值集维护；第二段是目录编码
    - 目录名称：目录名称  

    非必填字段： 

    - 快速索引：默认取目录名称拼音首字母大写    
    - 路由：根目录可不配置路由  
    - 序号：用于排序    
    - 图标：目录图标    
    - 描述：目录描述信息    

3. 点击`添加`即可完成。


## 5. 创建目录    


1. 创建好根目录后，可在行上点击`新建`按钮，创建下级目录(菜单、内部链接、外部链接)    

    ![创建目录](/docs/user-guide/manager-guide/image/menu-setting-03.png)     

2. 在创建页面中填写目录的相关信息。

    必填字段：  

    - 类别：可选 自设目录、菜单，如果不需要二级目录，则可以直接创建菜单类型 
    - 层级：层级与上级目录一致，且不可修改  
    - 目录编码：目录编码前缀与上级目录一致，且不可修改；建议目录编码也保持一定的层级性      
    - 上级目录：上级目录固定不可修改（编辑时可修改）   

    非必填字段：

    - 快速索引：默认取目录名称拼音首字母大写    
    - 路由：根目录可不配置路由  
    - 序号：用于排序    
    - 图标：目录图标       
    - 描述：目录描述信息        


## 6. 创建菜单   


1. 菜单是页面菜单中展示的最后一级，对应到具体的功能页面。    

    ![创建菜单](/docs/user-guide/manager-guide/image/menu-setting-04.png)     

2. 在创建页面中填写创建菜单的相关信息。

    必填字段：  

    - 类别：菜单    
    - 层级：层级与上级目录一致，且不可修改    
    - 菜单编码：菜单编码前缀与上级目录编码一致，且不可修改    
    - 菜单名称：菜单的名称    
    - 所属目录：菜单所属目录，为新建菜单的目录，不可更改  
    - 路由：菜单需要维护访问的路由    

    非必填字段：  

    - 快速索引：默认取菜单名称拼音首字母大写    
    - 序号：用于排序  
    -  图标：目录图标   
    - 是否虚拟菜单：如果菜单不在左侧菜单栏展示，只是用来维护权限关系，可设置为虚拟菜单    
    - 描述：菜单描述信息  



## 7. 创建内部链接


1. 内部链接是菜单展示的最后一级，链接到使用hzero权限认证的页面。    

    ![创建内部链接](/docs/user-guide/manager-guide/image/menu-setting-05.png)    

2. 在创建页面中填写内部链接的相关信息。

    必填字段： 

    - 类别：内部链接    
    - 层级：层级与上级目录一致，且不可修改  
    - 链接名称：链接的名称  
    - 链接编码：链接编码前缀与上级目录编码一致，且不可修改  
    - 所属目录：内部链接所属目录，为新建内部链接的目录，不可更改    
    - 路由：链接页面路由地址    

    非必填字段：  

    - 快速索引：默认取内部链接名称拼音首字母大写        
    - 序号：用于排序  
    - 图标：内部链接图标       
    - 描述：内部链接描述信息
  


## 8. 创建外部链接


1. 外部链接是菜单展示的最后一级，链接到使用hzero权限认证的页面。    

    ![创建外部链接](/docs/user-guide/manager-guide/image/menu-setting-06.png)

2. 在创建页面中填写外部链接的相关信息。

    必填字段：

    - 类别：外部链接    
    - 层级：层级与上级目录一致，且不可修改  
    - 链接名称：链接的名称  
    - 链接编码：链接编码前缀与上级目录编码一致，且不可修改  
    - 所属目录：外部链接所属目录，为新建外部链接的目录，不可更改    
    - 路由：链接页面路由地址    

    非必填字段:

    - 快速索引：默认取菜单名称拼音首字母大写    
    - 序号：用于排序  
    -  图标：外部链接图标       
    - 描述：外部链接描述信息   

  

## 9. 修改操作

在操作列上点击`编辑`，弹出编辑界面。 

![修改](/docs/user-guide/manager-guide/image/menu-setting-07.png)      


## 10. 禁用操作

`根目录`、`自设目录`类型菜单点击操作列`操作`→`禁用`，禁用该菜单。`菜单`、`内部链接`、`外部链接`类型菜单在操作列上点击`禁用`,禁用菜单。启用菜单按钮在相同位置，操作相同。 

![禁用](/docs/user-guide/manager-guide/image/menu-setting-08.png)    

## 11. 创建权限集

在菜单上，通过`操作`→`权限集`进入权限集维护页面。权限集是权限(API)的集合，权限集可以对应到页面上的按钮(配置按钮绑定API)，如果用户的角色没有分配这个权限集，则无法请求对应接口。     
因为权限集涉及到权限分配，一般由超级管理员创建维护，然后分配给下级管理员。  

![创建权限集](/docs/user-guide/manager-guide/image/menu-setting-09.png)    

必输字段:   
   
- 权限集编码：注意无需输入菜单前缀  
- 权限集名称：权限集的名称    

非必输字段:   
   
- 序号：用于排序    
- 权限类型：权限集类（API、BUTTON），不需要输入      
- 权限集控制类型：禁用，如果用户的角色没有分配该权限集，页面绑定的按钮显示禁用状态      
- 描述：描述信息        
- 状态：启用、禁用两种状态    


新建完成后，可在权限集上看到如下按钮：  

- 编辑：编辑权限集  
- 禁用：禁用权限集  
- 权限：维护权限集的权限    
- Lov：维护权限集下的SQL类型的值集  

## 12. 维护权限

点击`权限`按钮进入权限关系维护页面，通过`添加权限`按钮选择权限

![维护权限](/docs/user-guide/manager-guide/image/menu-setting-10.png)    

权限选择页面可看到系统中所有服务的API权限，API权限也区分 平台级、租户级。如果菜单为平台级，则查询平台级的权限，如果菜单为租户级，则查询租户级的权限。对于登录可访问、公开的API，无需维护权限关系，不会被查询出来。  

<blockquote class="warning">
         注意这里维护的权限应该是这个菜单页面会用到的需要授权的API。
    </blockquote>


## 13. 维护Lov

点击`Lov`按钮进入 Lov 关系维护页面，通过`添加Lov`按钮选择 Lov。
这里只需要维护 SQL 类型的值集 Lov，对于能执行 SQL 的操作都需要权限控制。对于 URL 类型的 Lov，只需要将URL值集对于的 API 维护到权限里即可。  

![维护Lov](/docs/user-guide/manager-guide/image/menu-setting-11.png)    

## 14. 复制目录
在目录上点击`操作`→`复制`，弹出复制并创建窗口，复制该菜单(可选菜单下的权限集，默认全部勾选)   

![复制目录](/docs/user-guide/manager-guide/image/menu-setting-12.png)    


## 15. 复制菜单
在目录上点击操作→复制，弹出复制并创建窗口，复制该目录树(可选菜单下的权限集，默认全部勾选)   

![复制菜单](/docs/user-guide/manager-guide/image/menu-setting-13.png)    


## 16. 阅读更多

- [通用设置](../../site-setting)
