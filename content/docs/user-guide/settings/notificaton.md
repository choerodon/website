+++
title = "通知"
description = ""
weight = 5
+++

# 通知

## 1. 概述

项目层通知设置主要用于为项目下的各类事件配置特定的通知方式与通知对象。并将消息分为3类，其中包括：敏捷消息、DevOps消息以及资源删除验证码。同时，还支持Webhook的设置功能。

## 2. 敏捷消息

敏捷消息指的是项目下与敏捷问题相关的事件消息。而用户可以在此为这些事件与消息配置特定的通知方式与通知对象，配置保存成功后，当该事件触发时，便会通过设置的通知方式通知到此处指定的通知对象。  
  
![image](/docs/user-guide/settings/image/agile-message.jpg)  

目前系统中内置的敏捷相关的事件有：问题创建、问题分配、问题已解决；用户可以直接在列表中为这些事件设置通知对象。    

选择一个事件，点击后面的`通知对象`下拉框，然后点击保存，便可设置该事件的通知对象。

<blockquote class="note"> 
 敏捷消息目前仅支持站内信的通知方式。
</blockquote>


## 3. DevOps消息

DevOps消息指的是项目下与DevOps模块（应用服务、代码管理以及部署资源）相关的事件消息。而用户可以在此为这些事件与消息配置特定的通知方式与通知对象，配置保存成功后，当该事件触发时，便会通过设置的通知方式通知到此处指定的通知对象。   

![image](/docs/user-guide/settings/image/devops-message.jpg)  

系统内置事件包含: 应用服务通知、流水线通知、代码管理通知以及部署资源通知；每类通知下面包含了多个事件，项目所有者可以直接在列表中设置每个事件的通知方式。设置保存成功后，当该事件触发时，便会通过设置的通知方式通知到此处指定的通知对象。  

选择一个事件，勾选其对应的`站内信`或`邮件`框，然后点击保存，便能设置该事件的通知方式。


> - DevOps消息已默认确定了其中各个事件的通知对象，且不支持自定义通知对象。     
> - 若出现 `通知方式`框禁选的情况，是因为在"平台层-消息服务"中已不支持该类通知方式，需联系平台管理员设置。



## 4. 资源删除验证

资源删除验证用于为项目下环境中的资源删除操作配置二次确认相关的通知信息，目前包括以下事件：删除实例、删除网络、删除域名、删除证书、删除配置映射以及删除密文。目前支持的通知方式为：站内信与邮件。此外，该类事件还支持自定义通知对象。

设置成功后，当用户在对应环境中执行相应的删除操作时，确认弹框中会出现`发送验证码`的按钮，点击后，会将验证码以设置的通知方式发送给指定的通知对象。联系相关人员获取到验证码后，需要输入至对应位置，最后点击删除即可。   

![image](/docs/user-guide/settings/image/resource-delete.jpg)    


若想为某个环境中的资源删除操作配置验证码二次确认通知，首先需要在此处选择好对应的环境。在此基础上勾选通知方式，设置通知对象。点击保存后，便可成功为该删除事件配置验证码二次确认通知了。


<blockquote class="note">     

若出现 `通知方式`框禁选的情况，是因为在"平台层-消息服务"中已不支持该类通知方式，需联系平台管理员设置。
</blockquote>


## 5. webhook配置

webhook配置是为了便于项目下将各个通知消息同步发送到钉钉、企业微信以及其他第三方消息通知渠道。

### 添加webhook

- 点击顶部操作栏的`创建Webhooks`按钮，打开创建侧开页。您可以在此处选择webhook名称、webhook类型、webhook地址，
- webhook类型支持钉钉、企业微信、JSON三种类型。
- 获取webhook地址：创建机器人或者点击机器人查看webhook地址。详细获取方法请查看第三方通知渠道的官方说明。
- 钉钉加签密钥：webhook类型为钉钉，钉钉机器人安全设置为加签时，需填入机器人的密钥，否则不能发送消息。

<blockquote class="note">     
webhook类型为钉钉时，请注意钉钉机器人安全设置的要求。
</blockquote>

- 选择需要发送webhook推送的消息类型，系统会依照配置向第三方推送消息。

- 点击`确定`，完成webhook的创建。


<div style="background-color:AntiqueWhite;color:red;padding:25px 50px">
    <p style="padding:0px;margin:0px;font-weight:bold">使用webhook的重要问题说明：</p>
（1）webhook通过请求发送数据到你的应用后，就不再关注这些数据。也就是说如果你的应用存在问题，数据会丢失。许多webhook会处理回应，如果程序出现错误会重传数据。如果你的应用处理这个请求并且依然返回一个错误，你的应用就会收到重复数据。<br>
（2）webhook会发出大量的请求，这样会造成你的应用阻塞。确保你的应用能处理这些请求。</div>


## 6. 阅读更多

- [接收设置](../../person/notify_setting/)
- [消息服务](../../manager-guide/system-configuration/message/)
